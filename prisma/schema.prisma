generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Champion {
  id     Int      @id @default(autoincrement())
  riotId Int      @unique
  key    String   @unique
  name   String
  title  String?
  icon   String
  roles  String[]

  abilities Ability[]
  skins     Skin[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Ability {
  id            Int      @id @default(autoincrement())
  championId    Int
  champion      Champion @relation(fields: [championId], references: [id], onDelete: Cascade)
  slot          String
  name          String
  description   String?
  icon          String?
  cooldowns     Float[]
  affectedByCdr Boolean  @default(true)
  costs         Float[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([championId, slot])
}

model Skin {
  id         Int      @id @default(autoincrement())
  championId Int
  champion   Champion @relation(fields: [championId], references: [id], onDelete: Cascade)
  riotId     Int
  name       String
  isBase     Boolean  @default(false)
  rarity     String?
  isLegacy   Boolean  @default(false)
  splashPath String?
  tilePath   String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([championId, riotId])
}
